<Project>
  <!-- Android: Include AAR -->
  <Target Name="_BugfenderSdkIncludeAar" BeforeTargets="ResolveLibraryProjectImports" Condition="$([MSBuild]::GetTargetPlatformIdentifier('$(TargetFramework)')) == 'android'">
    <PropertyGroup>
      <_BugfenderAarPath></_BugfenderAarPath>
    </PropertyGroup>
    <PropertyGroup Condition="Exists('$(MSBuildThisFileDirectory)..\jar\android-sdk.aar')">
      <_BugfenderAarPath>$(MSBuildThisFileDirectory)..\jar\android-sdk.aar</_BugfenderAarPath>
    </PropertyGroup>
    <PropertyGroup Condition="'$(_BugfenderAarPath)' == '' And $(TargetFramework.Contains('net10')) And Exists('$(MSBuildThisFileDirectory)..\lib\net10.0-android36.0\android-sdk.aar')">
      <_BugfenderAarPath>$(MSBuildThisFileDirectory)..\lib\net10.0-android36.0\android-sdk.aar</_BugfenderAarPath>
    </PropertyGroup>
    <PropertyGroup Condition="'$(_BugfenderAarPath)' == '' And $(TargetFramework.Contains('net9')) And Exists('$(MSBuildThisFileDirectory)..\lib\net9.0-android35.0\android-sdk.aar')">
      <_BugfenderAarPath>$(MSBuildThisFileDirectory)..\lib\net9.0-android35.0\android-sdk.aar</_BugfenderAarPath>
    </PropertyGroup>
    <ItemGroup>
      <AndroidLibrary Include="$(_BugfenderAarPath)" Condition="'$(_BugfenderAarPath)' != ''" />
    </ItemGroup>
  </Target>
  
  <!-- iOS: Include xcframework -->
  <Target Name="_BugfenderSdkIncludeFramework" BeforeTargets="ResolveNativeReferences" Condition="$([MSBuild]::GetTargetPlatformIdentifier('$(TargetFramework)')) == 'ios'">
    <ItemGroup>
      <NativeReference Include="$(MSBuildThisFileDirectory)..\native\net10.0-ios15.0\BugfenderSDK.xcframework" Condition="$(TargetFramework.Contains('net10')) And Exists('$(MSBuildThisFileDirectory)..\native\net10.0-ios15.0\BugfenderSDK.xcframework')">
        <Kind>Framework</Kind>
        <SmartLink>False</SmartLink>
        <ForceLoad>True</ForceLoad>
        <Frameworks>SystemConfiguration Security MobileCoreServices CoreGraphics</Frameworks>
        <IsCxx>True</IsCxx>
      </NativeReference>
      <NativeReference Include="$(MSBuildThisFileDirectory)..\native\net9.0-ios15.0\BugfenderSDK.xcframework" Condition="$(TargetFramework.Contains('net9')) And Exists('$(MSBuildThisFileDirectory)..\native\net9.0-ios15.0\BugfenderSDK.xcframework')">
        <Kind>Framework</Kind>
        <SmartLink>False</SmartLink>
        <ForceLoad>True</ForceLoad>
        <Frameworks>SystemConfiguration Security MobileCoreServices CoreGraphics</Frameworks>
        <IsCxx>True</IsCxx>
      </NativeReference>
    </ItemGroup>
  </Target>
</Project>

